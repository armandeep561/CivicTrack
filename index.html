<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CivicTrack | Community Issue Tracker</title>
    <meta name="theme-color" content="#111111" id="themeColorMeta">
    <link rel="icon" type="image/png" href="https://img.icons8.com/fluency/48/marker.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="page-loader">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <div class="loader-logo"><i class="fas fa-map-marker-alt"></i> CivicTrack</div>
        </div>
    </div>

    <div id="map"></div>

    <!-- Custom Zoom Controls -->
    <div class="custom-zoom-controls surface">
        <button id="zoomInBtn" title="Zoom In"><i class="fas fa-plus"></i></button>
        <button id="zoomOutBtn" title="Zoom Out"><i class="fas fa-minus"></i></button>
    </div>

    <!-- Desktop Control Panel -->
    <div class="control-panel surface">
        <div class="panel-header">
            <div class="header-top">
                <div class="logo"><i class="fas fa-map-marker-alt"></i> CivicTrack</div>
                <div class="user-actions">
                    <span id="welcomeMessage"></span>
                    <button class="icon-btn" id="logoutBtn" title="Logout"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>
            <div class="search-container"><input type="text" id="searchInput" placeholder="Search for a location..."><i
                    class="fas fa-search search-icon"></i></div>
        </div>
        <div class="panel-content">
            <div class="action-section">
                <p>See an issue? Help your community by reporting it.</p><button class="cta-btn" id="reportIssueBtn"><i
                        class="fas fa-plus-circle"></i> Report New Issue</button>
            </div>
            <div class="filter-section">
                <div class="filter-tabs" id="viewTabs"><button class="tab-btn active" data-tab="allIssues">Community
                        Issues</button><button class="tab-btn" data-tab="myReports">My Reports</button><button
                        class="tab-btn" data-tab="admin" id="adminTab" style="display:none;">Admin Panel</button></div>

                <div id="mainFilters" class="active-view">
                    <div class="filter-group"><label>Category</label>
                        <div id="categoryFilter" class="filter-buttons"></div>
                    </div>
                    <div class="filter-group"><label>Status</label>
                        <div id="statusFilter" class="filter-buttons"></div>
                    </div>
                    <div class="empty-state" id="issuesEmptyState" style="display: none;">No issues match the current
                        filters.</div>
                </div>

                <div id="adminPanel" class="view-panel">
                    <h4>Flagged for Review</h4>
                    <div id="flaggedIssuesContainer" class="admin-issue-list"></div>
                    <div class="empty-state" id="flaggedEmptyState">No flagged issues to review.</div>
                </div>
            </div>
        </div>
        <div class="panel-footer"><button class="icon-btn" id="appSettingsBtn" title="App Settings"><i
                    class="fas fa-palette"></i></button></div>
    </div>

    <!-- Mobile Controls -->
    <div class="mobile-controls surface">
        <button class="icon-btn" id="mobileMenuBtn" title="Menu & Filters"><i class="fas fa-bars"></i></button>
        <button class="cta-btn-mobile" id="mobileReportIssueBtn"><i class="fas fa-plus-circle"></i> Report</button>
        <button class="icon-btn" id="mobileSearchBtn" title="Search"><i class="fas fa-search"></i></button>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="modalOverlay">
        <!-- Login Modal -->
        <div class="modal-content surface" id="loginModal">
            <div class="modal-header">
                <h2><i class="fas fa-lock"></i> Welcome to CivicTrack</h2>
            </div>
            <div class="modal-body">
                <p class="modal-intro">Please log in to view and report issues.</p>
                <div id="loginError" class="error-message" style="display:none;"></div>
                <div class="input-group"><label>Username</label><input type="text" id="usernameInput" value="user">
                </div>
                <div class="input-group"><label>Password</label><input type="password" id="passwordInput"
                        value="password"></div>
                <button class="cta-btn" id="loginBtn">Login</button>
                <p class="hint">Hint: Use 'user' as your username & password.</p>
            </div>
        </div>
        <!-- Report/Edit Issue Modal -->
        <div class="modal-content surface" id="reportIssueModal">
            <div class="modal-header">
                <h2 id="modalTitle"><i class="fas fa-bullhorn"></i> Report a New Issue</h2><button
                    class="close-modal-btn">×</button>
            </div>
            <div class="modal-body">
                <div class="input-group"><label>Title</label><input type="text" id="issueTitle"
                        placeholder="e.g., Huge Pothole on Main St"></div>
                <div class="input-group"><label>Description</label><textarea id="issueDesc" rows="3"
                        placeholder="Add more details..."></textarea></div>
                <div class="input-group"><label>Category</label><select id="issueCategory">
                        <option value="Roads">Roads</option>
                        <option value="Lighting">Lighting</option>
                        <option value="Water Supply">Water</option>
                        <option value="Cleanliness">Cleanliness</option>
                        <option value="Public Safety">Safety</option>
                        <option value="Obstructions">Obstructions</option>
                    </select></div>
                <div class="input-group"><label>Radius of Impact</label><select id="issueRadius">
                        <option value="1">1 km</option>
                        <option value="3">3 km</option>
                        <option value="5" selected>5 km</option>
                    </select></div>
                <div class="input-group"><label for="issueImage" class="file-label"><i class="fas fa-camera"></i>
                        <span>Choose Image</span></label><input type="file" id="issueImage" accept="image/*"></div>
            </div>
            <div class="modal-footer"><button class="cta-btn" id="submitIssueBtn" disabled>Submit Report</button></div>
        </div>
        <!-- App Settings Modal -->
        <div class="modal-content surface" id="appSettingsModal">
            <div class="modal-header">
                <h2><i class="fas fa-palette"></i> App Settings</h2><button class="close-modal-btn">×</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <h3>Map Theme</h3>
                    <div class="theme-selector" id="themeSelector"><label class="theme-label"><input type="radio"
                                name="theme" value="light"><span class="theme-preview"
                                style="background: #F0F2F5;"></span> Light</label><label class="theme-label"><input
                                type="radio" name="theme" value="dark"><span class="theme-preview"
                                style="background: #242526;"></span> Dark</label><label class="theme-label"><input
                                type="radio" name="theme" value="satellite"><span class="theme-preview"
                                style="background: linear-gradient(45deg, #2a433a, #5e6b5e);"></span> Satellite</label>
                    </div>
                </div>
            </div>
        </div>
        <!-- Success Modal -->
        <div class="modal-content surface" id="successModal">
            <div class="modal-body success-body">
                <div class="success-icon"><i class="fas fa-check-circle"></i></div>
                <h2>Success!</h2>
                <p>Your report has been submitted. Thank you for contributing to your community.</p>
                <button class="cta-btn" id="successOkBtn">Awesome!</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>

</html>
